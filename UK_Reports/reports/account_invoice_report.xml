<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<template id="proforma_invoice_body">
	    	<t t-set="doc_header_string" t-value="'Sales PRO-FORMA'"/>
	    	<t t-call="UK_Reports.template_document_title"/>
	    	<div class="row">
	    		<!-- Space the address to the right slightly -->
		    	<div class="col-xs-1"/>
		    	<div class="col-xs-5">
		    		<t t-call="UK_Reports.template_partner_address"/>
		    	</div>
		    	<div class="col-xs-6">
		    		<strong>Proforma Info:</strong>
		    		<br/>
		    		<strong>Proforma Date</strong>
		    		<span t-field="o.date_invoice" t-field-options='{"format": "dd/MM/yyyy"}'/>
		    		<br/>
		    		<strong>Payment terms</strong>
		    		<span t-esc="o.sale_payment_term()"/>
		    		<br/>
		    		<strong>Your Reference</strong>
		    		<span t-esc="o.your_reference_format()"/>
		    		<br/>
		    		<strong>Sales Order No</strong>
		    		<span t-esc="o.sale_number()"/>
		    		<br/>
		    		<strong>Currency</strong>
		    		<span t-field="o.currency_id.name"/>
		    	</div>
		    </div>
		    <br/>
	    	<div class="row">
	    		<div class="col-xs-12">
	    			<t t-call="UK_Reports.invoice_orderlines_table"/>
		    	</div>
	    	</div>
	    	<br/>
	    	<div class="row">
	    		<div class="col-xs-8">
	    			<span t-raw="o.company_id.proforma_tandc"/>
	    		</div>
	    		<div class="col-xs-4">
	    			<t t-call="UK_Reports.orderline_totals_table"/>
	    		</div>
	    	</div>
		</template>

		<template id="invoice_body">
	    	<t t-set="doc_header_string" t-value="'Sales Invoice'"/>
	    	<t t-call="UK_Reports.template_document_title"/>
	    	<div class="row">
	    		<!-- Space the address to the right slightly -->
		    	<div class="col-xs-1"/>
		    	<div class="col-xs-5">
		    		<t t-call="UK_Reports.template_partner_address"/>
		    	</div>
		    	<div class="col-xs-6">
		    		<strong>Order Info:</strong>
		    		<br/>
		    		<strong>Invoice No</strong>
		    		<span t-field="o.number"/>
		    		<br/>
		    		<strong>Invoice Date</strong>
		    		<span t-field="o.date_invoice" t-field-options='{"format": "dd/MM/yyyy"}'/>
		    		<br/>
		    		<strong>Payment terms</strong>
		    		<span t-field="o.payment_term_id.name"/>
		    		<br/>
		    		<strong>Your Reference</strong>
		    		<span t-esc="o.your_reference_format()"/>
		    		<br/>
		    		<strong>Sales Order No</strong>
		    		<span t-esc="o.sale_number()"/>
		    		<br/>
		    		<t t-if="o.state == 'paid'">
		    			<strong>Invoice Status</strong>
		    			<span>Paid</span>
		    			<br/>
		    		</t>
		    		<strong>Currency</strong>
		    		<span t-field="o.currency_id.name"/>
		    	</div>
		    </div>
		    <br/>
	    	<div class="row">
	    		<div class="col-xs-12">
	    			<t t-call="UK_Reports.invoice_orderlines_table"/>
		    	</div>
	    	</div>
	    	<br/>
	    	<div class="row">
	    		<div class="col-xs-8">
	    			<span t-raw="o.company_id.invoice_tandc"/>
	    		</div>
	    		<div class="col-xs-4">
	    			<t t-call="UK_Reports.orderline_totals_table"/>
	    		</div>
	    	</div>
		</template>

		<template id="credit_note_body">
	    	<t t-set="doc_header_string" t-value="'Credit Note'"/>
	    	<t t-call="UK_Reports.template_document_title"/>
	    	<div class="row">
	    		<!-- Space the address to the right slightly -->
		    	<div class="col-xs-1"/>
		    	<div class="col-xs-5">
		    		<t t-call="UK_Reports.template_partner_address"/>
		    	</div>
		    	<div class="col-xs-6">
		    		<strong>Credit Note Info:</strong>
		    		<br/>
		    		<strong>Credit Date</strong>
		    		<span t-field="o.date_invoice" t-field-options='{"format": "dd/MM/yyyy"}'/>
		    		<br/>
		    		<strong>Payment terms</strong>
		    		<span t-esc="o.payment_term_id.name"/>
		    		<br/>
		    		<strong>Your Reference</strong>
		    		<span t-esc="o.your_reference_format()"/>
		    		<br/>
		    		<strong>Sales Order No</strong>
		    		<span t-esc="o.sale_number()"/>
		    		<br/>
		    		<strong>Currency</strong>
		    		<span t-field="o.currency_id.name"/>
		    	</div>
		    </div>
		    <br/>
	    	<div class="row">
	    		<div class="col-xs-12">
	    			<t t-call="UK_Reports.invoice_orderlines_table"/>
		    	</div>
	    	</div>
	    	<br/>
	    	<div class="row">
	    		<div class="col-xs-8">
	    			<span t-raw="o.company_id.credit_note_tandc"/>
	    		</div>
	    		<div class="col-xs-4">
	    			<t t-call="UK_Reports.orderline_totals_table"/>
	    		</div>
	    	</div>
		</template>

		<template id="uk_invoice_document">
        	<t t-call="UK_Reports.external_layout_uk">
			    <div class="page">
					<t t-if="o.type == 'out_invoice'">
		                <t t-if="o.state in ['proforma', 'proforma2']">
		                	<t t-call="UK_Reports.proforma_invoice_body"/>
		                </t>
		                <t t-else="">
		                	<t t-call="UK_Reports.invoice_body"/>
		                </t>
		            </t>
		            <t t-elif="o.type == 'out_refund'">
		                <t t-call="UK_Reports.credit_note_body"/>
		            </t>
			    </div>
			</t>
		</template>

		<report
		    id="uk_invoice_print"
		    model="account.invoice"
		    string="Invoice (UK format)"
		    report_type="qweb-pdf"
		    name="UK_Reports.uk_invoice"
		    file="UK_Reports.uk_invoice"
		    attachment="(object.state in ('open','paid')) and
		        ('INV'+(object.number or '').replace('/','')+'.pdf')"
		/>

	    <template id="uk_invoice">
	        <t t-call="report.html_container">
	            <t t-foreach="docs" t-as="o">
	                <t t-call="UK_Reports.uk_invoice_document" t-lang="user.partner_id.lang"/>
	            </t>
	        </t>
	    </template>
	</data>
</odoo>
