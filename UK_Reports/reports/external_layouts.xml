<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- Load some css file to help with styling / neatness of templates -->
<template id="assets_common" name="UK_Reports assets" inherit_id="report.assets_common">
 <xpath expr="." position="inside">
     <link href="/UK_Reports/static/src/css/UK_Reports-footers.css" rel="stylesheet"/>
     <link href="/UK_Reports/static/src/css/UK_Reports-headers.css" rel="stylesheet"/>
 </xpath>
</template>

<template id="external_layout_separator_horizontal">
    <div class="footer-separator">
        <div class="col-xs-12">
            <div class="separator-line" t-attf-style="border-top: 1px solid black"/>
        </div>
    </div>
</template>

<!--
TODO: Account statement needs headers / footers. It was initially defined against the partner
but that has now changed and will need speccing again
-->

<!-- NOTE: Keeping this as it may be useful at a later date.. -->
<!-- <template id="external_layout_footer_credit_note_layout">
    <t t-call="UK_Reports.external_layout_separator_horizontal"/>
    <div class="row">
        <div id="invoice-info-wrapper" class="col-xs-12 align-center">
            <p class="terms-and-conditions-lg" t-raw="tandc"/>
        </div>
    </div>
</template> -->

<!-- <template id="external_layout_footer_dual_tandc_layout">
    <t t-call="UK_Reports.external_layout_separator_horizontal"/>
    <div class="row">
        <div id="dual-tandc-wrapper" class="col-xs-12 align-center">
            <p class="terms-and-conditions-lg bold" t-raw="tandc1"/>
            <p class="terms-and-conditions-sm italic" t-raw="tandc2"/>
        </div>
    </div>
</template> -->

<!-- <template id="external_layout_footer_normal_layout">
    <t t-call="UK_Reports.external_layout_separator_horizontal"/>
    <div class="row">
        <div id="normal-info-wrapper" class="col-xs-8">
            <p class="terms-and-conditions-sm" t-raw="tandc"/>
        </div>
        <div id="payment-to-wrapper" class="col-xs-4">
            <span class="bold">Payment To:</span>
            <table>
                <tr>
                    <th>Account Name</th>
                    <td align="right" t-esc="company.account_name"/>
                </tr>
                <tr>
                    <th>Sort Code</th>
                    <td align="right" t-esc="company.sort_code"/>
                </tr>
                <tr>
                    <th>Account Number</th>
                    <td align="right" t-esc="company.account_number"/>
                </tr>
                <tr>
                    <th>IBAN</th>
                    <td align="right" t-esc="company.iban"/>
                </tr>
                <tr>
                    <th>Account Number</th>
                    <td align="right" t-esc="company.swift"/>
                </tr>
            </table>
        </div>
    </div>
</template> -->

<template id="external_layout_footer_uk">
    <div class="footer">
        <!-- Values which can change depending on report -->
        <t t-call="UK_Reports.external_layout_separator_horizontal"/>
        <div class="legal-info-vat-footer align-center">
            <span t-esc="company.legal_information_footer"/>
            <span>Registered in England No. </span>
            <span t-esc="company.company_registry"/>
            <span>V.A.T Reg. No. </span>
            <span t-esc="company.vat"/>
        </div>
        <div class="row">
            <div class="col-xs-2 pull-right">
                <br/>
                <span>Page</span>
                <span class="page" />
                of
                <span class="topage" />
            </div>
        </div>

<!-- NOTE: Keeping this as it may be useful at a later date.. -->
<!--         <t t-if="doc_model == 'account.invoice'">
            <t t-if="o.type == 'out_invoice'">
                <t t-if="o.state in ['proforma', 'proforma2']">
                    <t t-set="tandc" t-value="company.proforma_tandc"/>
                </t>
                <t t-else="">
                    <t t-set="tandc" t-value="company.invoice_tandc"/>
                </t>
                <t t-call="UK_Reports.external_layout_footer_normal_layout"/>
            </t>
            <t t-elif="o.type == 'out_refund'">
                <t t-set="tandc" t-value="company.credit_note_tandc"/>
                <t t-call="UK_Reports.external_layout_footer_credit_note_layout"/>
            </t>
        </t>

        <t t-elif="doc_model == 'sale.order'">
            <t t-if="o.state in ['draft', 'sent']">
                <t t-set="tandc" t-value="company.quotation_tandc"/>
            </t>
            <t t-elif="o.state in ['sale', 'done']">
                <t t-set="tandc" t-value="company.sale_tandc"/>
            </t>
            <t t-call="UK_Reports.external_layout_footer_normal_layout"/>
        </t>
        <t t-elif="doc_model == 'stock.picking'">
            <t t-if="o.picking_type_id.code == 'outgoing'">
                <t t-set="tandc1" t-value="company.delivery_tandc_1"/>
                <t t-set="tandc2" t-value="company.delivery_tandc_2"/>
                <t t-call="UK_Reports.external_layout_footer_dual_tandc_layout"/>
            </t>
        </t>
        <t t-elif="doc_model == 'purchase.order'">
            <t t-set="tandc1" t-value="company.purchase_tandc_1"/>
            <t t-set="tandc2" t-value="company.purchase_tandc_2"/>
            <t t-call="UK_Reports.external_layout_footer_dual_tandc_layout"/>
        </t> -->
    </div>
</template>

<template id="external_layout_header_uk">
    <div class="header">
        <!-- Values which can change depending on model -->
        <t t-if="doc_model == 'account.invoice'">
            <t t-set="phone" t-value="company.accounts_dept_phone"/>
            <t t-set="email" t-value="company.accounts_dept_email"/>
        </t>
        <t t-elif="doc_model == 'purchase.order'">
            <t t-set="phone" t-value="company.purchase_dept_phone"/>
            <t t-set="email" t-value="company.purchase_dept_email"/>
        </t>
        <t t-elif="doc_model == 'sale.order'">
            <t t-set="phone" t-value="company.sales_dept_phone"/>
            <t t-set="email" t-value="company.sales_dept_email"/>
        </t>
        <t t-else="doc_model == 'stock.picking'">
            <t t-if="o.picking_type_id.code == 'outgoing'">
                <t t-set="phone" t-value="company.sales_dept_phone"/>
                <t t-set="email" t-value="company.sales_dept_email"/>
            </t>
        </t>

        <div class="row">
            <div class="col-xs-4">
                <img class="source-logo" t-att-src="'data:image/png;base64,%s' % company.logo"/>
            </div>
            <div class="col-xs-4">
                <br/>
                <img class="source-mini-icon web" src='/UK_Reports/static/img/web.png'/>
                <span class="source-mini-icon-text web" t-esc="company.website"/>
                <br/>

                <img class="source-mini-icon phone" src='/UK_Reports/static/img/phone.png'/>
                <span class="source-mini-icon-text phone" t-esc="phone"/>
                <br/>

                <img class="source-mini-icon mail" src='/UK_Reports/static/img/mail.png'/>
                <span class="source-mini-icon-text mail" t-esc="email"/>
                <br/>
            </div>
            <div class="col-xs-5 source-address-column">
                <p class="source-addressline addrline1" t-esc="company.report_head_addrline1"/>
                <p class="source-addressline addrline2" t-esc="company.report_head_addrline2"/>
            </div>
        </div>
        <t t-call="UK_Reports.external_layout_separator_horizontal"/>
    </div>
</template>


<!-- New external layout for UK headers/footers which is callable per report -->
<template id="external_layout_uk">
    <!-- Multicompany -->
    <t t-if="not o and doc">
        <t t-set="o" t-value="doc"/>
    </t>
    <t t-if="o and 'company_id' in o">
        <t t-set="company" t-value="o.company_id"></t>
    </t>
    <t t-if="not o or not 'company_id' in o">
        <t t-set="company" t-value="res_company"></t>
    </t>
    <t t-call="UK_Reports.external_layout_header_uk"/>
    <t t-raw="0" />
    <t t-call="UK_Reports.external_layout_footer_uk"/>
</template>



</odoo>
