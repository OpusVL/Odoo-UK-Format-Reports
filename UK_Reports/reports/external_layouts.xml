<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- Load some css file to help with styling / neatness of templates -->
<template id="my_assets_common" name="UK_Reports assets" inherit_id="web.report_assets_common">
 <xpath expr="." position="inside">
	 <link href="/UK_Reports/static/src/css/UK_Reports-footers.css" rel="stylesheet"/>
	 <link href="/UK_Reports/static/src/css/UK_Reports-headers.css" rel="stylesheet"/>
	 <link href="/UK_Reports/static/src/css/UK_Reports-body.css" rel="stylesheet"/>
 </xpath>
</template>

<template id="external_layout_separator_horizontal">
	<div class="footer-separator">
		<div id="extlayout-separator-line" class="col-12 separator-line"/>
	</div>
</template>

<template id="external_layout_footer_uk">
	<div class="footer">
		<!-- Values which can change depending on report -->
		<t t-call="UK_Reports.external_layout_separator_horizontal"/>
		<div class="legal-info-vat-footer align-center">
			<br/>
			<em t-esc="company.legal_information_footer"/>
			<em>Registered in England No. </em>
			<em t-esc="company.company_registry"/>
			<em>V.A.T Reg. No. </em>
			<em t-esc="company.vat"/>
		</div>
		<div class="row">
			<div class="col-2 offset-10 pull-right">
				<span class="source_page_number">Page</span>
				<span class="page source_page_number"/>
				of
				<span class="topage"/>
			</div>
		</div>
	</div>
</template>

<template id="external_layout_header_uk">
	<div class="header">
		<!-- Values which can change depending on model -->
		<t t-if="doc_model == 'account.move'">
			<t t-set="phone" t-value="company.accounts_dept_phone"/>
			<t t-set="email" t-value="company.accounts_dept_email"/>
		</t>
		<t t-elif="doc_model == 'purchase.order'">
			<t t-set="phone" t-value="company.purchase_dept_phone"/>
			<t t-set="email" t-value="company.purchase_dept_email"/>
		</t>
		<t t-elif="doc_model == 'sale.order'">
			<t t-set="phone" t-value="company.sales_dept_phone"/>
			<t t-set="email" t-value="company.sales_dept_email"/>
		</t>
		<t t-elif="doc_model == 'account.payment'">
			<t t-set="phone" t-value="company.accounts_dept_phone"/>
			<t t-set="email" t-value="company.accounts_dept_email"/>
		</t>
		<t t-elif="doc_model == 'res.partner'">
			<t t-set="phone" t-value="company.accounts_dept_phone"/>
			<t t-set="email" t-value="company.accounts_dept_email"/>
		</t>
		<t t-else="doc_model == 'stock.picking'">
			<t t-if="o.picking_type_id.code == 'outgoing'">
				<t t-set="phone" t-value="company.sales_dept_phone"/>
				<t t-set="email" t-value="company.sales_dept_email"/>
			</t>
		</t>
		<div class="row">
			<div class="col-3 source-logo-column">
				<img id="extlayout-source-logo" class="source-logo" t-att-src="'data:image/png;base64,%s' % to_text(company.logo)"/>
			</div>
			<div class="col-4 source-details-column">
				<br/>
				<img id="extlayout-web-icon" class="source-mini-icon web" src='/UK_Reports/static/img/web.png'/>
				<span id="extlayout-web-text" class="source-mini-icon-text web" t-esc="company.website"/>
				<br/>

				<img id="extlayout-phone-icon" class="source-mini-icon phone" src='/UK_Reports/static/img/phone.png'/>
				<span id="extlayout-phone-text" class="source-mini-icon-text phone" t-esc="phone"/>
				<br/>

				<img id="extlayout-mail-icon" class="source-mini-icon mail" src='/UK_Reports/static/img/mail.png'/>
				<span id="extlayout-mail-text" class="source-mini-icon-text mail" t-esc="email"/>
				<br/>
			</div>
			<div class="col-5 source-address-column">
				<p class="source-addressline addrline1" t-esc="company.report_head_addrline1"/>
				<p class="source-addressline addrline2" t-esc="company.report_head_addrline2"/>
			</div>
		</div>
		<t t-call="UK_Reports.external_layout_separator_horizontal"/>
	</div>
</template>


<!-- New external layout for UK headers/footers which is callable per report -->
<template id="external_layout_uk">
	<!-- Multicompany -->
	<t t-set="company" t-value="False"/>
	<t t-if="not o and doc">
		<t t-set="o" t-value="doc"/>
	</t>
	<t t-if="o and 'company_id' in o">
		<t t-set="company" t-value="o.company_id"></t>
	</t>
	<t t-if="not company and o.env and o.env.user.company_id">
		<t t-set="company" t-value="o.env.user.company_id"></t>
	</t>
	<t t-if="not company">
		<t t-set="company" t-value="res_company"></t>
	</t>

	<t t-call="UK_Reports.external_layout_header_uk"/>
	<div class="article" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
		<t t-raw="0"/>
	</div>
	<t t-call="UK_Reports.external_layout_footer_uk"/>
</template>

</odoo>
