<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<template id="delivery_note_body">
			<t t-set="doc_header_string" t-value="'Delivery Note'"/>
			<t t-call="UK_Reports.template_document_title"/>
			<div class="row">
				<div class="col-xs-5">
					<t t-call="UK_Reports.template_partner_address_deliver_to_header"/>
				</div>
				<div class="col-xs-5 col-xs-offset-2">
					<strong>Delivery Note Info:</strong>
					<br/>
					<strong>Delivery Note No</strong>
					<span t-field="o.name"/>
					<br/>
					<strong>Delivery Note Date</strong>
					<span t-field="o.date_done" t-options='{"format": "dd/MM/yyyy"}'/>
					<br/>
					<strong>Sales Order No</strong>
					<span t-esc="o.sale_id.name"/>
					<br/>
				</div>
			</div>
			<br/>
			<br/>
			<div class="row">
				<div class="col-xs-12">
					<table class="orderlines">
						<thead id="delnote-orderline-header" class="orderline-header">
							<tr>
								<th class="wide">Description</th>
								<th class="text-right">Qty Ordered</th>
								<th class="text-right">Qty Sent</th>
								<th class="text-right">Qty To Follow</th>
							</tr>
						</thead>
						<tbody id="delnote-orderlines-rows-body">
							<tr t-foreach="o.pack_operation_product_ids" t-as="line">
								<td t-esc="line.uk_report_description_format()"/>
								<td t-esc="line.qty_ordered_format()" class="text-right"/>
								<td t-esc="line.qty_sent_format()" class="text-right"/>
								<td t-esc="line.qty_to_follow_format()" class="text-right"/>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<br/>
			<div id="delnote-orderline-totals-row" class="row">
				<div class="col-xs-4 col-xs-offset-8">
					<table class="orderlines-totals">
						<tr id="delnote-row-border-top" class="row-border-top">
							<td class="text-left bold">Total Qty Sent</td>
							<td class="text-right" t-esc="o.total_qty_sent_format()"/>
						</tr>
						<tr>
							<td class="text-left bold">Total Qty To Follow</td>
							<td class="text-right" t-esc="o.total_qty_to_follow_format()"/>
						</tr>
					</table>
				</div>
			</div>
			<br/>
			<div class="row">
				<div id="quote-tandc-block" class="col-xs-12">
					<span t-raw="o.company_id.delivery_tandc"/>
				</div>
			</div>
		</template>

		<template id="uk_delivery_note_document">
			<t t-call="UK_Reports.external_layout_uk">
				<div class="page">
					<t t-call="UK_Reports.delivery_note_body"/>
				</div>
			</t>
		</template>

		<report
			id="uk_delivery_note_print"
			model="stock.picking"
			string="Sales Delivery Note (UK format)"
			report_type="qweb-pdf"
			name="UK_Reports.uk_delivery_note"
			file="UK_Reports.uk_delivery_note"
			attachment="('Sales Delivery Note'+(object.name or '').replace('/','')+'.pdf')"
		/>

		<template id="uk_delivery_note">
			<t t-call="report.html_container">
				<t t-foreach="docs" t-as="o">
					<t t-if="o.picking_type_id.code == 'outgoing'">
						<t t-call="UK_Reports.uk_delivery_note_document" t-lang="user.partner_id.lang"/>
					</t>
				</t>
			</t>
		</template>
	</data>
</odoo>
